var ADMIN_APPURL=baseUrl;

var SITENAME="";

var ConfirmTitle="Are you sure?";

var doYouDelTxt="Do you want to delete selected records?";

var pleaseWaitTxt="Please wait...";

var notEqualTxt="Value should not be zero";

var AvtUpdated="Your profile avatar has been updated";

var CancelBtn="Cancel";

var ConfirmBtn="Yes";

var extError='Invalid extension';

var onlyImageTxt='Only images are allowed';

var imageUpdateTxt='Image updated successfully';

var noRecSelTxt="No Records Selected for Delete,\nPlease Select Records to delete";

var AVTURL=siteUrl+'/avatars';

var BlobSupport = false;

if (window.FileReader && window.Blob) {

	BlobSupport = true;				

}

$.validator.setDefaults({

	//onfocusout: false,

    invalidHandler: function(form, validator) {},

	highlight:function(element){$(element).addClass('is-invalid');

    },

    unhighlight:function(element){$(element).removeClass('is-invalid');

    },

	submitHandler: function(form){

		

		if($(form).attr("id")=='popup_box' || $(form).attr("id")=='res_popup_box'){

			form.submit();

		}else{

			//$.blockUI({ message: '<h1><img src="busy.gif" /> Just a moment...</h1>' });

			 $.blockUI({

                message: '<p class="blockUitxt" style="margin-bottom:0;padding:10px;">Just a moment...</p>'

                , css: {

                    color: '#ffffff'

                    , border: '1px solid #000'

                    , backgroundColor: '#000'

                }

            });



			

			

			setTimeout(function(){form.submit();},1000); 

		}

		

		

    },

    errorElement:'span',

    errorClass:'invalid-feedback',

    errorPlacement: function(error, element){ 

	

        if(element.parent('.input-group').length){

            error.insertAfter(element.parent());

        }else if(element.attr("id")=="page_desc"){

			error.appendTo($('#page_desc').parent('div'));

		}else if(element.attr("id")=="temp_text"){

			error.appendTo($('#temp_text').parent('div'));

		}

		else if(element.hasClass("planOpts")){

			error.insertAfter($(element).parent().parent());

		}else{

            error.insertAfter(element);

        }

}});

function removepicimage(element){

	$.ajax({

		url:ADMIN_APPURL+'/remove-gallery',

		method:'post',

		data:{imgpost:$(element).attr("data-imgpost")},

		async:false,

		success:function(data){ 

			if(data==1){

				$(element).parent().parent().remove();

			}

		}

 	});

}

 if($('#photoszone').length==1){

Dropzone.autoDiscover = false;

     var myDropzone = new Dropzone("div#photoszone", {addRemoveLinks: true, acceptedFiles: ".PNG,.png,.jpeg,.jpg,.mp4", url: ADMIN_APPURL+"/photos-media",method:"post", maxFiles: 10,

    success:function(file,response){

		var sch_fileupload_image=$('#sch_fileupload_image').val();

		if(sch_fileupload_image!=''){

			sch_fileupload_image=sch_fileupload_image+','+response;

		}else{

			sch_fileupload_image=response;

		}

	

		$('#sch_fileupload_image').val(sch_fileupload_image);

		},

	processing:function(){

		$('#postimgbtn').attr('disabled',true);

	},

	queuecomplete:function(file){

		$('#postimgbtn').removeAttr('disabled');

	}

	});

 }

$.validator.setDefaults({ ignore: ':hidden:not(.chosen) :hidden:not(.ckeditor)'});

$('#adprofile_form').validate({
	rules:{
 		client_password:{minlength:8 , maxlength:16},
		
 	},
	messages:{
	},

});

jQuery.validator.addMethod("lettersonly", function(value, element) {
    return this.optional(element) || /^[a-z\s.]+$/i.test(value);
}, "Only alphabetical characters"); 

$('.profile_form').validate({
	rules:{
		site_commission:{minlength:1 , maxlength:2},
 		//client_password:{minlength:8 , maxlength:16},
		//client_rpassword:{equalTo:'#client_password' , minlength:8, maxlength:16},
		//clientele_password:{minlength:8 , maxlength:16},
		//clientele_rpassword:{equalTo:'#clientele_password' , minlength:8, maxlength:16},
		site_logo:{extension:"jpg|JPG|png|PNG|jpeg|JPEG"},
		slider_image:{extension:"jpg|JPG|png|PNG|jpeg|JPEG"},
		category_image:{extension:"jpg|JPG|png|PNG|jpeg|JPEG"},
		site_commission:{min:1},
		emailtemp_content_en:{	
			required: function() 
			{
				CKEDITOR.instances.emailtemp_content_en.updateElement();
			},
			
		},
		
		page_content_en:{	
			required: function() 
			{
				CKEDITOR.instances.page_content_en.updateElement();
			},
			
		},
		section_three_block:{	
			required: function() 
			{
				CKEDITOR.instances.section_three_block.updateElement();
			},
		},
		faq_answer_en:{	
			required: function() 
			{
				CKEDITOR.instances.faq_answer_en.updateElement();
			},
			
		},
	
 	},
	messages:{
      slider_image:{extension:'Only images are allowed'},
	  category_image:{extension:'Only images are allowed'},

	},

 });



/*$('.profile_form2').validate({
	rules:{
		client_old_password:{remote:baseUrl+"/profile/checkpassword"},//minlength:8,maxlength:16,
 		client_password:{minlength:8,maxlength:16,remote:baseUrl+"/profile/checkoldpass"},
		client_rpassword:{equalTo:'#client_password',minlength:8,maxlength:16},	
 	},
	messages:{
       
	},
});	*/

jQuery.validator.addClassRules("checkemail", {
    remote: baseUrl + "/checkemail"
});



 $.validator.addMethod("passcheck", function(e, t) {

    return this.optional(t) || /^(?=.*\d)(?=.*[a-zA-Z])[\w~@#$%^&*<>?+=`|{}:;!.?\"()\[\]-]{8,1000}$/.test(e)

}, "Password must contain at least 8 characters including one letter and one number");

jQuery.validator.addClassRules("checkblogcategory", {

    remote: ADMIN_APPURL + "/checkblog-category"

});



jQuery.validator.addClassRules("checkblogtitle", {

    remote: ADMIN_APPURL + "/checkblog-title"

});







$(document).ready(function() {

	

	

	if($('.ckeditor').length>0){ 

			 CKEDITOR.on('instanceReady', function () {

				$.each(CKEDITOR.instances, function (instance) {

					CKEDITOR.instances[instance].document.on("keyup", CK_jQ);

					CKEDITOR.instances[instance].document.on("paste", CK_jQ);

					CKEDITOR.instances[instance].document.on("keypress", CK_jQ);

					CKEDITOR.instances[instance].document.on("blur", CK_jQ);

					CKEDITOR.instances[instance].document.on("change", CK_jQ);

				});

			});

		 }

	

	$('.profileToolTip').tooltip({html:true});

	if($('.tagsinput').length>0)

	{

			$('.tagsinput').tagsinput({

			 maxChars: 5

			});	

	}

	if($('.chzn-select').length>0)

	{

		$(".chzn-select").chosen();	

	}

	if($('.onlynumber').length>0)

	{

	$('.onlynumber').keydown(function(e) {

		var key = e.keyCode;

       	   if(key>=48 && key<=57)

	   {

		   return false;

		}

		return true;

    });	



	}

	if($('.calandarimput').length>0)

	{

		$('.calandarimput').keydown(function(e) {

   			e.preventDefault();

   			return false;

		});

	}

	

	

		    $(".preloader").fadeOut();

			if(currentRoute!="adminlogin" && currentRoute!="forgotpassword" && currentRoute!="resetpassword"){

				

			

					

       		$('[data-toggle="tooltip"]').tooltip();

			

			

			if($(".deimg").length>0){

				$('.deimg').initial(); 

			}

			

			

       

       		$('[data-toggle="popover"]').popover();

			

			

			

	   		

		}

		else{

			$('#loginform').validate();

			if($('#admin_password').length>0){

				$('#admin_password').password();

			}

		}

});





function getMimeType(header){

	var type = '';

	switch (header) {

    case "89504e47":

        type = "image/png";

        break;

    case "47494638":

        type = "image/gif";

        break;

    case "ffd8ffe0":

    case "ffd8ffe1":

    case "ffd8ffe2":

    case "ffd8ffe3":

    case "ffd8ffe8":

        type = "image/jpeg";

        break;

    default:

        type = "unknown"; // Or you can use the blob.type as fallback

        break;

}

return type;	

}		

function avatarUploader(){

	$('.file-upload').fileupload({

		url:ADMIN_APPURL+'/uploadavatar',

		add:function(e, data) {   

			var uploadErrors=[];

			var file_name=data.originalFiles[0]['name'];

	        var Extension=file_name.substr((file_name.lastIndexOf('.') + 1));

			var extension_array=['jpg','jpeg','png','JPG','JPEG','PNG'];

			if(($.inArray(Extension, extension_array)<0)){ 

				$('.fileinput-filename').html('');

				$('.fileinput').removeClass('fileinput-exists');

				$('.fileinput').addClass('fileinput-new');

				showAppAlert(SITENAME,extError,"warning");

				$('#client_image').val('');

			}

			else {

				if(BlobSupport){  

					var Header = '';

					var _URL = window.URL || window.webkitURL;

					var file = data.originalFiles[0];



					var blob = file; // See step 1 above

					var fileReader = new FileReader();

					fileReader.onloadend = function(e) {

					  var arr = (new Uint8Array(e.target.result)).subarray(0, 4);

					  var header = "";

					  for(var i = 0; i < arr.length; i++) {

						 header += arr[i].toString(16);

					  }

					  Header = getMimeType(header);

					  

					  if(Header !='unknown'){

							$("#up_btn").off('click').on('click', function () {

								data.submit();

							});

						}

						else{

							$('.fileinput-filename').html('');

							$('.fileinput').removeClass('fileinput-exists');

							$('.fileinput').addClass('fileinput-new');

							showAppAlert(SITENAME,extError,"warning");

							$('#client_image').val('');	

						}

					};

					fileReader.readAsArrayBuffer(blob);

				}

				else{

					$("#up_btn").off('click').on('click', function () {

						data.submit();

					});

				}

			}

        },

		done: function(e,data){

			

			$('.fileinput-filename').html('');

			$('.fileinput').removeClass('fileinput-exists');

			$('.fileinput').addClass('fileinput-new');

			if(data.result==0){

				$('#pic-progress').hide();

				showAppAlert(SITENAME,extError,"warning");

				

			}

			else{

				var data=(data.result);

				if($('.user-content img').length>0){

					$('.user-content img').remove();

				}if($('.user-pro img').length>0){

					//$('.user-pro img').remove();

				}if($('.user-bg img').length>0){

					//$('.user-bg img').remove();

				}

				var navImg=AVTURL+"/160/"+data;

				

				$('#shortImg').attr("src",navImg);

				$('.avatar-online img').attr("src",navImg);

				

				$('#pic-progress').hide();

				toastInit(imageUpdateTxt,"success");

				$("#up_btn").parent().addClass("d-none");

			}

		},

		progress: function(e, data){

			$('#pic-progress').show();

			var progress = parseInt(data.loaded / data.total * 100, 10);

			$("#pic-bar").width(progress+'%');

			$('#pic-progress').css('width', progress+'%');

		}

	});

	

}

/*$('#emailForm').validate({
	rules:{
		client_email_password:{remote:baseUrl+"/profile/checkpassword"},//minlength:8,maxlength:16,
 	},
	messages:{

	},

});*/

jQuery.validator.addClassRules("adminchangeemail", {

    remote: baseUrl + "/admin-change-email"

});

 function removefile(ele){

		$("#up_btn").parent().addClass("d-none");

		}

function mediaUploader(url){

	$('.file-upload').fileupload({

		url:ADMIN_APPURL+'/'+url,

		add:function(e, data) {  

			var uploadErrors=[];

			var file_name=data.originalFiles[0]['name']

	        var Extension=file_name.substr((file_name.lastIndexOf('.') + 1));

			var extension_array=['jpg','jpeg','png','JPG','JPEG','PNG'];

			if(($.inArray(Extension, extension_array)<0)){ 

				$('.fileinput-filename').html('');

				$('.fileinput').removeClass('fileinput-exists');

				$('.fileinput').addClass('fileinput-new');

				showAppAlert(SITENAME,extError,"warning");

			}

			else {

				data.submit();

			}

        },

		done: function(e,data){

			$('.fileinput-filename').html('');

			$('.fileinput').removeClass('fileinput-exists');

			$('.fileinput').addClass('fileinput-new');

			if(data.result==0){

				$('#pic-progress').hide();

				showAppAlert(SITENAME,extError,"warning");

			}

			else{

				var data = JSON.parse(data.result);

				if($('#preview').length>0){

					$('#preview').remove();

				}

				if(url=='service-media-uploader'){

					$('#service_image').val(data);

					var img="<img id='preview' src='"+SIMGURL+"/"+data+"'  alt='service-media' class='img-thumbnail' style='max-width:100px;' />";

				}

				else{

					$('#page_images').val(res.uploader);

					var img="<img id='preview' src='"+MEDIAURL+"/"+data+"'  alt='page-media' class='img-thumbnail' style='max-width:100px;' />";

				}

				$(img).insertAfter($('#pic-progress'));

			}

		},

		progress: function(e, data){

			$('#pic-progress').show();

			var progress = parseInt(data.loaded / data.total * 100, 10);

			$("#pic-bar").width(progress+'%');

		}

	});}

	

$('#deletebcchk').click(function(e){

	var current_checked_status = $(this).prop('checked');

	if(current_checked_status==false){

		 $('.checkboxes').prop('checked',false);

	}

	else{

		$('.checkboxes').prop('checked',true);

	}});

		

function showAppAlert(title,msg,type){

	swal({   

		title:title,   

		text:msg,   

		type:type,

		timer:5000,   

		showConfirmButton:false 

	});}

	

function showAppConfirmation(text){

	swal({   

		title:ConfirmTitle,   

		text:text,   

		type:"warning",   

		showCancelButton:true,   

		confirmButtonColor:"#DD6B55",   

		confirmButtonText:ConfirmBtn,

		cancelButtonText:CancelBtn,     

		closeOnConfirm:false,   

		closeOnCancel:false 

	},function(isConfirm){   

		if(isConfirm) {     

			swal("Deleted!", "Your imaginary file has been deleted.", "success");   

		} else {     

			swal("Cancelled", "Your imaginary file is safe :)", "error");   

		} 

	});}

	

function toastInit(msg,icon){



 				 toastr.options.closeButton = true;

				 if(icon=='success')

				 toastr.success(msg);

				 if(icon=='error')

				 toastr.error(msg);

				 if(icon=='info')

				 toastr.info(msg);

				 if(icon=='warning')

				 toastr.info(warning);

	}

	

function checkPwdStrenth(val){

     var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");

     var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");

     var enoughRegex = new RegExp("(?=.{6,}).*", "g");

     if (false==enoughRegex.test(val)) {

         $('#passstrength').html('More Characters');

     } else if (strongRegex.test(val)) {

		 $('#passstrength').addClass('text-success');

		 $('#passstrength').html('Strong!');

     } else if (mediumRegex.test(val)) {

		 $('#passstrength').addClass('text-warning');

		 $('#passstrength').html('Medium!');

     } else {

		 $('#passstrength').addClass('text-danger');

		 $('#passstrength').html('Weak!');

     }

     return true;}



function setAviDatepicker()

{

	

	  var newDateArr=new Array();

	  if(allAvailableDates!=''){

	  var DateArray = allAvailableDates.split(",");

		  if(DateArray.length>0){

			  var gotoDate=DateArray[0];

				  gotoDate=gotoDate.split('-');

			  var newMonth=parseInt(gotoDate[1]-1);	  

			  for(var i=DateArray.length-1;i>=0;i--){

				 //var curr_date=new Date(DateArray[i]);

				 var curr_date=convertDatetoJs(DateArray[i]);

				 newDateArr.push(curr_date);

			  }

			  

			  var setStartDate=new Date(gotoDate[0],newMonth,gotoDate[2]);

		  }

		  else{

			  var setStartDate=new Date();

		  }

	  

	  }

	 

	$('#workinghour_div').datepicker({

			multidate: true,

			//altField: '#working_schedules',

			format: 'mm/dd/yyyy',

			startDate:new Date(),

			defaultDate:"07/22/2016",

			beforeShowDay:function(checkDate){

			  	var search=convertDatetoJs(checkDate);

				if (newDateArr.indexOf(search)>-1) {//console.log('date matched'+search);

					//return {classes: 'active'};

				}		 

			} 

			

		});

		

		/* SET SCHEDULES IN DATEPICKER */

		if(allAvailableDates!=''){

			var allDateArr=new Array();

			var allSchedulesArr=allAvailableDates.split(',');

			allSchedulesArr.forEach(function(entry) {

				var date1=entry.split('-');

				

				var monthNo=date1[1];

				monthNo=parseInt(monthNo)-1;

				

				if(monthNo<10)

					monthNo="0"+monthNo;

					

				var dateNo=date1[2];

					if(dateNo<10)

						dateNo="0"+dateNo;	

							

				var newSearchDate=new Date(date1[0],monthNo,dateNo);

				allDateArr.push(newSearchDate);

				

			  }, this);	

			  

			$('#workinghour_div').datepicker('setDates',allDateArr);	

		}

		

}



function convertDatetoJs(checkDate)

{

	  var dateName=parseInt(new Date(checkDate).getDate());

	  if(dateName<10){

		 dateName="0"+dateName;

	  }

	   var monthName=parseInt(new Date(checkDate).getMonth());

		 // monthName =parseInt(monthName)+1;

	  if(monthName<10){

		var newMonth="0"+monthName;

	  }

	  

	  var curr_day =dateName;        

	  var curr_month =newMonth;        

	  var curr_year = new Date(checkDate).getUTCFullYear();        

	  var curr_date=curr_year+'-'+curr_month+'-'+curr_day; 

	 // var curr_date=new Date(curr_year,curr_month,curr_day);

	  return curr_date;   

}	 

	 



function checkSelects(id){

 	var checkedRecords=false;	

	$(".elem_ids").each(function(index, element) {

        if($(this).prop("checked")==true){checkedRecords=true;}

    }); 

	if(checkedRecords==false){

		

		showAppAlert(SITENAME,noRecSelTxt,"warning");

		return false;	

	}else{

 

  swal({

    title:ConfirmTitle,   

    text:doYouDelTxt,   

    type: "warning",

    showCancelButton: true,

    confirmButtonColor: "#DD6B55",

    confirmButtonText:"Yes",

    cancelButtonText:"Cancel",  

    closeOnConfirm: false,

    closeOnCancel: true

  },

  function(isConfirm){

    if(isConfirm){

   

   document.getElementById(id).submit();

  

    }else {

    return false; 

    }

  });

  return false;

 }}

function globalbestStatus(chkAll) {
	if($(chkAll).hasClass("status-1")){

			var status=0

			$(chkAll).addClass("status-0");

			$(chkAll).removeClass("status-1");

	}else{

		var status=1

			$(chkAll).addClass("status-1");

			$(chkAll).removeClass("status-0");

	}

	

	vars=	$(chkAll).attr("id").split("-");

	title=	$(chkAll).attr("title") ;

	scriptUrl=baseUrl+"/ajaxsetbeststatus/"+vars[0]+"/"+vars[1]+"/"+status;	

	if(title!==undefined && title!=""){usermessage=title+" has been changed";}

	  else{

		  field_title = vars[0].replace(/_/g," ");

		  field_title=field_title;

		  

		usermessage='<b>'+field_title +'</b> best seller status has been changed';}

		$.ajax({

			url: scriptUrl,

			dataType:"json",

			success: function(data) {

				if(data.success){

					toastInit(data.message,'success');	
				}else{

					toastInit(data.message,'warning');

				}

		},

		error:function(data) {

			toastInit("<b>Internal Server Error</b>",'warning');

		}
	});
}

function globalfavStatus(chkAll){

 	if($(chkAll).hasClass("status-1")){

			var status=0

			$(chkAll).addClass("status-0");

			$(chkAll).removeClass("status-1");

	}else{

		var status=1

			$(chkAll).addClass("status-1");

			$(chkAll).removeClass("status-0");

	}

	

	vars=	$(chkAll).attr("id").split("-");

	title=	$(chkAll).attr("title") ;

	scriptUrl=baseUrl+"/ajaxsetfavstatus/"+vars[0]+"/"+vars[1]+"/"+status;	

	if(title!==undefined && title!=""){usermessage=title+" has been changed";}

	  else{

		  field_title = vars[0].replace(/_/g," ");

		  field_title=field_title;

		  

		usermessage='<b>'+field_title +'</b> favorite status has been changed';}

		$.ajax({

			url: scriptUrl,

			dataType:"json",

			success: function(data) {

				if(data.success){

					toastInit(data.message,'success');	
				}else{

					toastInit(data.message,'warning');

				}

		},

		error:function(data) {

			toastInit("<b>Internal Server Error</b>",'warning');

		}

	});
}

function globalstoreStatus(chkAll){

 	if($(chkAll).hasClass("status-1")){

			var status=0

			$(chkAll).addClass("status-0");

			$(chkAll).removeClass("status-1");

	}else{

		var status=1

			$(chkAll).addClass("status-1");

			$(chkAll).removeClass("status-0");

	}

	

	vars=	$(chkAll).attr("id").split("-");

	title=	$(chkAll).attr("title") ;

	scriptUrl=baseUrl+"/ajaxsetstorestatus/"+vars[0]+"/"+vars[1]+"/"+status;	

	if(title!==undefined && title!=""){usermessage=title+" has been changed";}

	  else{

		  field_title = vars[0].replace(/_/g," ");

		  field_title=field_title;

		  

		usermessage='<b>'+field_title +'</b>  status has been changed';}

		$.ajax({

			url: scriptUrl,

			dataType:"json",

			success: function(data) {

				if(data.success){

					toastInit(data.message,'success');	
					if(status == '1') {
						$(".store-stat[data-id="+vars[1]+"]").text('Approved');
						if($(".store-stat[data-id="+vars[1]+"]").hasClass("btn-info")) {
							$(".store-stat[data-id="+vars[1]+"]").removeClass("btn-info");
						}
						if($(".store-stat[data-id="+vars[1]+"]").hasClass("btn-danger")) {
							$(".store-stat[data-id="+vars[1]+"]").removeClass("btn-danger");
						}
						$(".store-stat[data-id="+vars[1]+"]").addClass("btn-success");
					} else {
						$(".store-stat[data-id="+vars[1]+"]").text('Declined');
						if($(".store-stat[data-id="+vars[1]+"]").hasClass("btn-info")) {
							$(".store-stat[data-id="+vars[1]+"]").removeClass("btn-info");
						}
						if($(".store-stat[data-id="+vars[1]+"]").hasClass("btn-success")) {
							$(".store-stat[data-id="+vars[1]+"]").removeClass("btn-success");
						}
						$(".store-stat[data-id="+vars[1]+"]").addClass("btn-danger");
					}
				}else{

					toastInit(data.message,'warning');

				}

		},

		error:function(data) {

			toastInit("<b>Internal Server Error</b>",'warning');

		}

	});}	

function globalStatus(chkAll){

 	if($(chkAll).hasClass("status-1")){

			var status=0

			$(chkAll).addClass("status-0");

			$(chkAll).removeClass("status-1");

	}else{

		var status=1

			$(chkAll).addClass("status-1");

			$(chkAll).removeClass("status-0");

	}

	

	vars=	$(chkAll).attr("id").split("-");

	title=	$(chkAll).attr("title") ;

	scriptUrl=baseUrl+"/ajaxsetstatus/"+vars[0]+"/"+vars[1]+"/"+status;	

	if(title!==undefined && title!=""){usermessage=title+" has been changed";}

	  else{

		  field_title = vars[0].replace(/_/g," ");

		  field_title=field_title;

		  

		usermessage='<b>'+field_title +'</b>  status has been changed';}

		$.ajax({

			url: scriptUrl,

			dataType:"json",

			success: function(data) {

				if(data.success){

					toastInit(data.message,'success');	

				}else{

					toastInit(data.message,'warning');

				}

		},

		error:function(data) {

			toastInit("<b>Internal Server Error</b>",'warning');

		}

	});}











function getStates(num,keyFlag)

{

	 

	if(keyFlag==''){

		$.blockUI({

			css: {

				border: 'none',

				padding: '5px',

				width: '24%',

				left: '39%',

				backgroundColor: '#000',

				opacity: .8,

				color: '#fff',

			},

		   message: "<div class='Loader'><div class='Text'>"+pleaseWaitTxt+"</div></div>", 

		});

	}

	

	

	$.ajax({

		url: baseUrl+'/getstates',

		data:{num:num},

		async:false,

		success: function(data) {

			if(keyFlag==''){

				setTimeout($.unblockUI, 500);

			}

			

			data=JSON.parse(data);

			

			var opt = document.createElement('option');

			var select1 = document.getElementById('city_state_id');

			document.getElementById("city_state_id").innerHTML = "";

			opt.innerHTML = "Select State";

			opt.value = "";

			

			if(data.length>0){

				document.getElementById("city_state_id").innerHTML = "";

				for (var i=0; i<data.length; i++){

					var opt = document.createElement('option');

					opt.value = data[i].state_id;

					opt.innerHTML = data[i].state_name_en;

					if(keyFlag!='' && keyFlag==data[i].state_id){

						opt.selected = true;

					}

					select1.appendChild(opt);

				}

			}

			else{

				opt.value = "";

				opt.innerHTML = "Select State";

				select1.appendChild(opt);

			}

			

			},	

	});

}



function CK_jQ() { 

	for (instance in CKEDITOR.instances) {

		CKEDITOR.instances[instance].updateElement();

	}

}

function passwordEncrypt()
{
    if($("#client_password").length>0){
        var Psw = $("#client_password").val();
        if(Psw.length > 0){
            $("#client_password").removeAttr("maxLength");
            $("#client_password").removeAttr("minLength");
            var Psw = btoa(btoa(Psw)+"_"+encryptSessKey);
            $("#client_password").val(Psw);
        }
    }
    
    if($("#client_rpassword").length>0){
        var Psw = $("#client_rpassword").val();
        if(Psw.length > 0){
            $("#client_rpassword").removeAttr("maxLength");
            $("#client_rpassword").removeAttr("minLength");
            var Psw = btoa(btoa(Psw)+"_"+encryptSessKey);
            $("#client_rpassword").val(Psw);
        }
    }
    
    if($("#client_old_password").length>0){
        var Psw = $("#client_old_password").val();
        if(Psw.length > 0){
            $("#client_old_password").removeAttr("maxLength");
            var Psw = btoa(btoa(Psw)+"_"+encryptSessKey);
            $("#client_old_password").val(Psw);
        }
    }

    if($("#passwordoption").length>0){
        var Psw = $("#passwordoption").val();
        if(Psw.length > 0){
            $("#passwordoption").removeAttr("maxLength");
            var Psw = btoa(btoa(Psw)+"_"+encryptSessKey);
            $("#passwordoption").val(Psw);
        }
    }

    if($("#client_email_password").length>0){
        var Psw = $("#client_email_password").val();
        if(Psw.length > 0){
            $("#client_email_password").removeAttr("maxLength");
            var Psw = btoa(btoa(Psw)+"_"+encryptSessKey);
            $("#client_email_password").val(Psw);
        }
    }
    return true;
}

$('.email').on('blur, keyup', function(){
	var thisVal = $(this).val();
	$(this).val($.trim(thisVal));
})

jQuery.validator.addMethod("email", function(value, element) {
    var EmailVal = value
    EmailVal = $.trim(EmailVal);
    $(element).val(EmailVal);

    return this.optional(element) || /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(EmailVal);
}, "Please enter a valid email address.");


$.validator.addMethod("passcheck", function(e, t) {
    return this.optional(t) || /^(?=.*\d)(?=.*[a-zA-Z])[\w~@#$%^&*<>?+=`|{}:;!.?\"()\[\]-]{8,1000}$/.test(e)
}, "Password must contain at least 8 characters including one letter and one number");


var elementsNameStr = "[name=client_name],[name=user_name]";
$(document).on("keydown",elementsNameStr,function(e){
  // Allow: backspace, delete, tab, escape, enter and .
  var key = e.keyCode;
  // alert(key);
  if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 || (e.keyCode === 65) || 
    (e.keyCode >= 35 && e.keyCode <= 40)){
      return;
    }
  if ((key == 106) || (key == 107) || (key == 109) ||  (key == 110) || (key == 111) || (key >= 96 && key <= 105) || (key >= 48 && key <= 57) || (key==187 || key == 219 || key == 221 || key == 189)) {
    e.preventDefault();
  }
  if ((e.ctrlKey && (e.keyCode==86)) || (e.ctrlKey && (e.keyCode==219)) || (e.ctrlKey && (e.keyCode==221))) { // block ctrl+v
    e.preventDefault();
  } 
});


$('input').on('keyup', function(e){
    var key = e.keyCode;
    if(key==13){
        var form_id = $(this).closest('form').attr('id');
        $('#'+form_id).find('.admin_btn').trigger('click');
    }
});